<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>pages/Calendario/Calendario.jsx - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-App.html">App</a><ul class='methods'><li data-type='method'><a href="module-App.html#~App">App</a></li><li data-type='method'><a href="module-App.html#~AppContent">AppContent</a></li></ul></li><li><a href="module-api_axios.html">api/axios</a></li><li><a href="module-components_AdminRoute.html">components/AdminRoute</a></li><li><a href="module-components_HelpButton_AboutModal.html">components/HelpButton/AboutModal</a></li><li><a href="module-components_HelpButton_HelpButton.html">components/HelpButton/HelpButton</a></li><li><a href="module-components_HelpButton_HelpModal.html">components/HelpButton/HelpModal</a></li><li><a href="module-components_MemberRoute.html">components/MemberRoute</a></li><li><a href="module-components_Navigation_Footer.html">components/Navigation/Footer</a></li><li><a href="module-components_Navigation_Navbar.html">components/Navigation/Navbar</a></li><li><a href="module-components_PasswordValidator.html">components/PasswordValidator</a></li><li><a href="module-components_ProtectedRoute.html">components/ProtectedRoute</a></li><li><a href="module-context_AuthContext.html">context/AuthContext</a><ul class='methods'><li data-type='method'><a href="module-context_AuthContext.html#.useAuth">useAuth</a></li><li data-type='method'><a href="module-context_AuthContext.html#~getCsrfCookie">getCsrfCookie</a></li></ul></li><li><a href="module-context_LanguageContext.html">context/LanguageContext</a><ul class='methods'><li data-type='method'><a href="module-context_LanguageContext.html#.useLanguage">useLanguage</a></li></ul></li><li><a href="module-hooks_useTranslation.html">hooks/useTranslation</a><ul class='methods'><li data-type='method'><a href="module-hooks_useTranslation.html#.useTranslation">useTranslation</a></li></ul></li><li><a href="module-main.html">main</a></li><li><a href="module-pages_Admin_GestionUsuarios.html">pages/Admin/GestionUsuarios</a></li><li><a href="module-pages_Calendario_Calendario.html">pages/Calendario/Calendario</a></li><li><a href="module-pages_Composiciones_Composiciones.html">pages/Composiciones/Composiciones</a></li><li><a href="module-pages_ComposicionesInterpretadas_ComposicionesInterpretadas.html">pages/ComposicionesInterpretadas/ComposicionesInterpretadas</a><ul class='methods'><li data-type='method'><a href="module-pages_ComposicionesInterpretadas_ComposicionesInterpretadas.html#~ComposicionesInterpretadas">ComposicionesInterpretadas</a></li></ul></li><li><a href="module-pages_ConfirmacionEventos_ConfirmacionEventos.html">pages/ConfirmacionEventos/ConfirmacionEventos</a></li><li><a href="module-pages_Entidades_Entidades.html">pages/Entidades/Entidades</a></li><li><a href="module-pages_EventoUsuario_EventoUsuario.html">pages/EventoUsuario/EventoUsuario</a></li><li><a href="module-pages_Eventos_Eventos.html">pages/Eventos/Eventos</a></li><li><a href="module-pages_Eventos_FormularioEvento.html">pages/Eventos/FormularioEvento</a></li><li><a href="module-pages_Home_Home.html">pages/Home/Home</a><ul class='methods'><li data-type='method'><a href="module-pages_Home_Home.html#~AdminCard">AdminCard</a></li><li data-type='method'><a href="module-pages_Home_Home.html#~FeatureCard">FeatureCard</a></li><li data-type='method'><a href="module-pages_Home_Home.html#~PublicHome">PublicHome</a></li><li data-type='method'><a href="module-pages_Home_Home.html#~QuickAccessCard">QuickAccessCard</a></li><li data-type='method'><a href="module-pages_Home_Home.html#~UserDashboard">UserDashboard</a></li><li data-type='method'><a href="module-pages_Home_Home.html#~getEventTypeColor">getEventTypeColor</a></li></ul></li><li><a href="module-pages_Instrumentos_Instrumentos.html">pages/Instrumentos/Instrumentos</a></li><li><a href="module-pages_Login_Login.html">pages/Login/Login</a></li><li><a href="module-pages_Mensajes_DetalleMensaje.html">pages/Mensajes/DetalleMensaje</a></li><li><a href="module-pages_Mensajes_FormularioMensaje.html">pages/Mensajes/FormularioMensaje</a></li><li><a href="module-pages_Mensajes_Mensajes.html">pages/Mensajes/Mensajes</a></li><li><a href="module-pages_MensajesUsuario_MensajesUsuario.html">pages/MensajesUsuario/MensajesUsuario</a><ul class='methods'><li data-type='method'><a href="module-pages_MensajesUsuario_MensajesUsuario.html#~MensajesUsuario">MensajesUsuario</a></li></ul></li><li><a href="module-pages_MinimosEvento_MinimosEvento.html">pages/MinimosEvento/MinimosEvento</a></li><li><a href="module-pages_NotFound_NotFound.html">pages/NotFound/NotFound</a></li><li><a href="module-pages_Perfil_Perfil.html">pages/Perfil/Perfil</a></li><li><a href="module-pages_Prestamos_Prestamos.html">pages/Prestamos/Prestamos</a></li><li><a href="module-pages_Register_Register.html">pages/Register/Register</a></li><li><a href="module-pages_RegistroPendiente_RegistroPendiente.html">pages/RegistroPendiente/RegistroPendiente</a></li><li><a href="module-pages_RestablecerPassword_NuevaPassword.html">pages/RestablecerPassword/NuevaPassword</a></li><li><a href="module-pages_RestablecerPassword_RestablecerPassword.html">pages/RestablecerPassword/RestablecerPassword</a></li><li><a href="module-pages_TiposInstrumento_TiposInstrumento.html">pages/TiposInstrumento/TiposInstrumento</a></li><li><a href="module-utils_translations.html">utils/translations</a></li></ul>
    
</nav>

<div id="main">
    

    
    <h1 class="page-title">pages/Calendario/Calendario.jsx</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file Calendario.jsx
 * @module pages/Calendario/Calendario
 * @description Componente principal del calendario de eventos. Permite visualizar eventos en un calendario mensual,
 * seleccionar días, ver detalles de eventos y, si el usuario es admin, cancelar eventos futuros.
 * Incluye paginación, leyenda de tipos, notificaciones y traducción de textos.
 * @author Rafael Rodriguez Mengual
 */

"use client"

import { useState, useEffect } from "react"
import { ChevronLeft, ChevronRight, CalendarIcon, Clock, MapPin, Music, X, AlertTriangle, Check } from "lucide-react"
import api from "../../api/axios"
import { useTranslation } from "../../hooks/useTranslation"
import { useAuth } from "../../context/AuthContext"

/**
 * Componente principal del calendario de eventos.
 * @function
 * @returns {JSX.Element} Calendario interactivo con eventos y detalles.
 */
export default function Calendario() {
  const { t } = useTranslation()
  const [eventos, setEventos] = useState([])
  const [loading, setLoading] = useState(true)
  const [currentDate, setCurrentDate] = useState(new Date())
  const [selectedDate, setSelectedDate] = useState(null)
  const [eventosDelDia, setEventosDelDia] = useState([])

  // Estado para la paginación de eventos del día
  const [currentEventPage, setCurrentEventPage] = useState(1)
  const eventsPerPage = 5

  // Estado para el modal de detalles del evento
  const [showEventModal, setShowEventModal] = useState(false)
  const [selectedEvent, setSelectedEvent] = useState(null)

  // Estado para el modal de confirmación de eliminación
  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false)

  // Estado para notificaciones
  const [notification, setNotification] = useState({ show: false, message: "", type: "" })

  // Saber si el usuario es admin
  const { isAdmin } = useAuth()

  /**
   * Efecto para cargar los eventos al montar el componente.
   * Llama a la API y guarda los eventos en el estado.
   */
  useEffect(() => {
    const fetchEventos = async () => {
      try {
        setLoading(true)
        const response = await api.get("/eventos")
        // Acceder correctamente a los eventos en la estructura de respuesta
        const eventosData = response.data?.eventos || response.data?.data?.eventos || []
        // console.log("Eventos cargados:", eventosData)
        setEventos(eventosData)
      } catch (error) {
        console.error("Error al cargar eventos:", error)
      } finally {
        setLoading(false)
      }
    }
    fetchEventos()
  }, [])

  /**
   * Efecto para actualizar los eventos del día cuando cambia la fecha seleccionada o la lista de eventos.
   */
  useEffect(() => {
    if (selectedDate &amp;&amp; eventos.length > 0) {
      // Formatear la fecha seleccionada a YYYY-MM-DD para comparar
      const year = selectedDate.getFullYear()
      const month = String(selectedDate.getMonth() + 1).padStart(2, "0")
      const day = String(selectedDate.getDate()).padStart(2, "0")
      const fechaFormateada = `${year}-${month}-${day}`

      // console.log("Fecha seleccionada formateada:", fechaFormateada)

      // Filtrar eventos que coincidan con la fecha seleccionada
      const eventosEnFecha = eventos.filter((evento) => {
        // Extraer solo la parte de la fecha (YYYY-MM-DD) del evento
        const fechaEvento = evento.fecha.split("T")[0]
        // console.log(`Comparando: ${fechaEvento} con ${fechaFormateada}`)
        return fechaEvento === fechaFormateada
      })

      // console.log("Eventos encontrados para la fecha:", eventosEnFecha)
      setEventosDelDia(eventosEnFecha)
      // Resetear la página actual cuando se selecciona una nueva fecha
      setCurrentEventPage(1)
    } else {
      setEventosDelDia([])
    }
  }, [selectedDate, eventos])

  /**
   * Devuelve el número de días de un mes.
   * @param {number} year - Año.
   * @param {number} month - Mes (0-indexado).
   * @returns {number} Días en el mes.
   */
  const getDaysInMonth = (year, month) => {
    return new Date(year, month + 1, 0).getDate()
  }

  /**
   * Devuelve el día de la semana del primer día del mes.
   * @param {number} year - Año.
   * @param {number} month - Mes (0-indexado).
   * @returns {number} Día de la semana (0=domingo).
   */
  const getFirstDayOfMonth = (year, month) => {
    return new Date(year, month, 1).getDay()
  }

  /**
   * Cambia al mes anterior.
   */
  const handlePrevMonth = () => {
    setCurrentDate((prev) => {
      const prevMonth = new Date(prev)
      prevMonth.setMonth(prev.getMonth() - 1)
      return prevMonth
    })
    setSelectedDate(null)
  }

  /**
   * Cambia al mes siguiente.
   */
  const handleNextMonth = () => {
    setCurrentDate((prev) => {
      const nextMonth = new Date(prev)
      nextMonth.setMonth(prev.getMonth() + 1)
      return nextMonth
    })
    setSelectedDate(null)
  }

  /**
   * Selecciona un día del calendario.
   * @param {number} day - Día del mes.
   */
  const handleDateClick = (day) => {
    if (day) {
      const clickedDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), day)
      setSelectedDate(clickedDate)
    }
  }

  /**
   * Devuelve los eventos de un día concreto del mes actual.
   * @param {number} day - Día del mes.
   * @returns {Array} Lista de eventos para ese día.
   */
  const getEventosForDay = (day) => {
    // Formatear la fecha a YYYY-MM-DD para comparar
    const year = currentDate.getFullYear()
    const month = String(currentDate.getMonth() + 1).padStart(2, "0")
    const dayStr = String(day).padStart(2, "0")
    const fechaFormateada = `${year}-${month}-${dayStr}`

    // Filtrar eventos que coincidan con la fecha
    return eventos.filter((evento) => {
      // Extraer solo la parte de la fecha (YYYY-MM-DD) del evento
      const fechaEvento = evento.fecha.split("T")[0]
      return fechaEvento === fechaFormateada
    })
  }

  // Paginación para eventos del día
  const indexOfLastEvent = currentEventPage * eventsPerPage
  const indexOfFirstEvent = indexOfLastEvent - eventsPerPage
  const currentEvents = eventosDelDia.slice(indexOfFirstEvent, indexOfLastEvent)
  const totalEventPages = Math.ceil(eventosDelDia.length / eventsPerPage)

  const handleNextEventPage = () => {
    if (currentEventPage &lt; totalEventPages) {
      setCurrentEventPage(currentEventPage + 1)
    }
  }

  const handlePrevEventPage = () => {
    if (currentEventPage > 1) {
      setCurrentEventPage(currentEventPage - 1)
    }
  }

  // Función para abrir el modal de detalles del evento
  const handleOpenEventModal = (evento) => {
    setSelectedEvent(evento)
    setShowEventModal(true)
  }

  // Función para cerrar el modal de detalles del evento
  const handleCloseEventModal = () => {
    setShowEventModal(false)
    setSelectedEvent(null)
    setShowDeleteConfirm(false)
  }

  // Función para mostrar la confirmación de eliminación
  const handleShowDeleteConfirm = () => {
    setShowDeleteConfirm(true)
  }

  // Función para eliminar un evento
  const handleDeleteEvent = async () => {
    if (!selectedEvent) return

    try {
      await api.delete(`/eventos/${selectedEvent.id}`)

      // Actualizar la lista de eventos eliminando el evento borrado
      const updatedEventos = eventos.filter((e) => e.id !== selectedEvent.id)
      setEventos(updatedEventos)

      // Actualizar la lista de eventos del día
      const updatedEventosDelDia = eventosDelDia.filter((e) => e.id !== selectedEvent.id)
      setEventosDelDia(updatedEventosDelDia)

      // Mostrar notificación de éxito
      setNotification({
        show: true,
        message: t("calendar.eventDeleted"),
        type: "success",
      })

      // Cerrar el modal
      handleCloseEventModal()

      // Ocultar la notificación después de 3 segundos
      setTimeout(() => {
        setNotification({ show: false, message: "", type: "" })
      }, 3000)
    } catch (error) {
      console.error("Error al eliminar el evento:", error)

      // Mostrar notificación de error
      setNotification({
        show: true,
        message: t("calendar.errorDeletingEvent"),
        type: "error",
      })

      // Ocultar la notificación después de 3 segundos
      setTimeout(() => {
        setNotification({ show: false, message: "", type: "" })
      }, 3000)
    }
  }

  const renderCalendar = () => {
    const year = currentDate.getFullYear()
    const month = currentDate.getMonth()
    const daysInMonth = getDaysInMonth(year, month)
    const firstDayOfMonth = getFirstDayOfMonth(year, month)

    const days = []

    // Días vacíos al inicio para alinear con el día de la semana correcto
    for (let i = 0; i &lt; firstDayOfMonth; i++) {
      days.push(&lt;div key={`empty-${i}`} className="h-24 sm:h-28 md:h-32 lg:h-36">&lt;/div>)
    }

    // Días del mes
    for (let day = 1; day &lt;= daysInMonth; day++) {
      const eventosDelDia = getEventosForDay(day)
      const hasEvents = eventosDelDia.length > 0

      const isSelected =
        selectedDate &amp;&amp;
        selectedDate.getDate() === day &amp;&amp;
        selectedDate.getMonth() === month &amp;&amp;
        selectedDate.getFullYear() === year

      days.push(
        &lt;div
          key={day}
          onClick={() => handleDateClick(day)}
          className={`h-24 sm:h-28 md:h-32 lg:h-36 p-1 border border-gray-800 hover:bg-gray-900/30 cursor-pointer transition-colors relative overflow-hidden ${
            isSelected ? "bg-gray-800/50 border-[#C0C0C0]" : ""
          }`}
        >
          &lt;div className="text-xs sm:text-sm text-[#C0C0C0] font-semibold mb-1">{day}&lt;/div>
          {hasEvents &amp;&amp; (
            &lt;div className="overflow-y-auto max-h-[calc(100%-20px)] scrollbar-thin scrollbar-thumb-gray-700 scrollbar-track-transparent">
              {eventosDelDia.slice(0, 3).map((evento, index) => (
                &lt;div
                  key={index}
                  className={`text-[9px] sm:text-[10px] p-1 mb-1 rounded-full truncate ${
                    getTipoColor(evento.tipo).bg
                  } ${getTipoColor(evento.tipo).text} ${getTipoColor(evento.tipo).border} font-medium`}
                  title={`${evento.nombre} - ${evento.hora ? formatTime(evento.hora) : t("calendar.noTimeSpecified")} - ${
                    evento.lugar || t("calendar.noLocationSpecified")
                  }`}
                >
                  {evento.nombre}
                &lt;/div>
              ))}
              {eventosDelDia.length > 3 &amp;&amp; (
                &lt;div className="text-[9px] sm:text-[10px] text-gray-400 text-center">
                  +{eventosDelDia.length - 3} {t("calendar.moreEvents")}
                &lt;/div>
              )}
            &lt;/div>
          )}
        &lt;/div>,
      )
    }

    return days
  }

  const formatTime = (timeString) => {
    if (!timeString) return "-"
    return timeString.substring(0, 5) // Extraer solo HH:MM
  }

  const formatDate = (dateString) => {
    if (!dateString) return "-"

    // Extraer solo la parte de la fecha (YYYY-MM-DD)
    const fechaPartes = dateString.split("T")[0].split("-")

    // Crear una fecha con los componentes
    const fecha = new Date(
      Number.parseInt(fechaPartes[0]),
      Number.parseInt(fechaPartes[1]) - 1,
      Number.parseInt(fechaPartes[2]),
    )

    // Formatear la fecha según el idioma actual
    return fecha.toLocaleDateString("es-ES", {
      weekday: "long",
      year: "numeric",
      month: "long",
      day: "numeric",
    })
  }

  const getTipoColor = (tipo) => {
    switch (tipo?.toLowerCase()) {
      case "ensayo":
        return { bg: "bg-blue-900/30", text: "text-blue-400", border: "border border-blue-800" }
      case "concierto":
        return { bg: "bg-purple-900/30", text: "text-purple-400", border: "border border-purple-800" }
      case "procesion":
        return { bg: "bg-green-900/30", text: "text-green-400", border: "border border-green-800" }
      case "pasacalles":
        return { bg: "bg-yellow-900/30", text: "text-yellow-400", border: "border border-yellow-800" }
      default:
        return { bg: "bg-gray-900/30", text: "text-gray-400", border: "border border-gray-800" }
    }
  }

  const isEventInFuture = (fecha, hora) => {
    if (!fecha) return false

    const now = new Date()
    const eventDate = new Date(fecha)

    if (hora) {
      // Si hay hora específica, combinar fecha y hora
      const [hours, minutes] = hora.split(":")
      eventDate.setHours(Number.parseInt(hours), Number.parseInt(minutes), 0, 0)
    } else {
      // Si no hay hora, asumir que es al final del día
      eventDate.setHours(23, 59, 59, 999)
    }

    return eventDate > now
  }

  // Use translated month and day names
  const monthNames = t("calendar.months")
  const dayNames = t("calendar.days")

  return (
    &lt;div className="container mx-auto px-4 py-8">
      {/* Notificación */}
      {notification.show &amp;&amp; (
        &lt;div
          className={`fixed top-4 right-4 z-50 px-4 py-3 rounded-lg shadow-lg flex items-center ${
            notification.type === "success" ? "bg-green-900/80 text-green-100" : "bg-red-900/80 text-red-100"
          }`}
        >
          {notification.type === "success" ? (
            &lt;Check className="mr-2 h-5 w-5" />
          ) : (
            &lt;AlertTriangle className="mr-2 h-5 w-5" />
          )}
          &lt;p>{notification.message}&lt;/p>
        &lt;/div>
      )}

      &lt;div className="flex justify-between items-center mb-8">
        &lt;h1 className="text-2xl font-bold text-[#C0C0C0]">{t("calendar.title")}&lt;/h1>
      &lt;/div>

      &lt;div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
        {/* Calendario */}
        &lt;div className="lg:col-span-2 bg-black/30 border border-gray-800 rounded-lg p-4">
          {loading ? (
            &lt;div className="flex justify-center items-center h-64">
              &lt;div className="text-[#C0C0C0]">{t("calendar.loading")}&lt;/div>
            &lt;/div>
          ) : (
            &lt;>
              {/* Cabecera del calendario */}
              &lt;div className="flex justify-between items-center mb-4">
                &lt;button
                  onClick={handlePrevMonth}
                  className="p-2 text-gray-400 hover:text-[#C0C0C0] rounded-full hover:bg-gray-900/50"
                >
                  &lt;ChevronLeft size={20} />
                &lt;/button>
                &lt;h2 className="text-xl font-semibold text-[#C0C0C0]">
                  {monthNames[currentDate.getMonth()]} {currentDate.getFullYear()}
                &lt;/h2>
                &lt;button
                  onClick={handleNextMonth}
                  className="p-2 text-gray-400 hover:text-[#C0C0C0] rounded-full hover:bg-gray-900/50"
                >
                  &lt;ChevronRight size={20} />
                &lt;/button>
              &lt;/div>

              {/* Días de la semana */}
              &lt;div className="grid grid-cols-7 gap-1 mb-1">
                {dayNames.map((day) => (
                  &lt;div key={day} className="h-8 flex items-center justify-center text-sm font-medium text-gray-400">
                    {day}
                  &lt;/div>
                ))}
              &lt;/div>

              {/* Días del mes */}
              &lt;div className="grid grid-cols-7 gap-1">{renderCalendar()}&lt;/div>
            &lt;/>
          )}
        &lt;/div>

        {/* Eventos del día seleccionado */}
        &lt;div className="bg-black/30 border border-gray-800 rounded-lg p-4">
          {/* Leyenda de tipos de eventos */}
          &lt;div className="flex flex-wrap items-center justify-center gap-2 mb-4">
            &lt;div className="px-3 py-1 rounded-full bg-blue-900/30 text-blue-400 border border-blue-800">
              &lt;span className="text-xs">{t("calendar.rehearsal")}&lt;/span>
            &lt;/div>
            &lt;div className="px-3 py-1 rounded-full bg-purple-900/30 text-purple-400 border border-purple-800">
              &lt;span className="text-xs">{t("calendar.concert")}&lt;/span>
            &lt;/div>
            &lt;div className="px-3 py-1 rounded-full bg-green-900/30 text-green-400 border border-green-800">
              &lt;span className="text-xs">{t("calendar.procession")}&lt;/span>
            &lt;/div>
            &lt;div className="px-3 py-1 rounded-full bg-yellow-900/30 text-yellow-400 border border-yellow-800">
              &lt;span className="text-xs">{t("calendar.parade")}&lt;/span>
            &lt;/div>
          &lt;/div>

          &lt;div className="flex items-center justify-between mb-4">
            &lt;div className="flex items-center">
              &lt;CalendarIcon size={20} className="text-[#C0C0C0] mr-2" />
              &lt;h2 className="text-lg font-semibold text-[#C0C0C0]">
                {selectedDate
                  ? `${t("calendar.events")} ${t("common.oof")} ${selectedDate.getDate()} ${t("calendar.space")} ${
                      monthNames[selectedDate.getMonth()]
                    }`
                  : t("calendar.selectDate")}
              &lt;/h2>
            &lt;/div>

            {/* Contador de eventos */}
            {eventosDelDia.length > eventsPerPage &amp;&amp; (
              &lt;div className="text-xs text-gray-400">
                {t("calendar.showing")} {indexOfFirstEvent + 1}-{Math.min(indexOfLastEvent, eventosDelDia.length)}{" "}
                {t("calendar.of")} {eventosDelDia.length}
              &lt;/div>
            )}
          &lt;/div>

          {selectedDate ? (
            eventosDelDia.length > 0 ? (
              &lt;>
                &lt;div className="space-y-4">
                  {currentEvents.map((evento) => (
                    &lt;div
                      key={evento.id}
                      className="bg-gray-900/30 border border-gray-800 rounded-lg p-3 cursor-pointer hover:bg-gray-800/30 transition-colors"
                      onClick={() => handleOpenEventModal(evento)}
                    >
                      &lt;div className="flex items-start justify-between">
                        &lt;h3 className="text-[#C0C0C0] font-medium">{evento.nombre}&lt;/h3>
                        &lt;div
                          className={`px-2 py-1 rounded-full text-xs font-medium ${getTipoColor(evento.tipo).bg} ${
                            getTipoColor(evento.tipo).text
                          } ${getTipoColor(evento.tipo).border}`}
                        >
                          {evento.tipo.charAt(0).toUpperCase() + evento.tipo.slice(1)}
                        &lt;/div>
                      &lt;/div>
                      &lt;div className="mt-3 space-y-2">
                        &lt;div className="flex items-center text-sm">
                          &lt;Clock size={16} className="text-gray-400 mr-2" />
                          &lt;span className="text-[#C0C0C0]">
                            {formatTime(evento.hora) || t("calendar.noTimeSpecified")}
                          &lt;/span>
                        &lt;/div>
                        &lt;div className="flex items-center text-sm">
                          &lt;MapPin size={16} className="text-gray-400 mr-2" />
                          &lt;span className="text-[#C0C0C0]">{evento.lugar || t("calendar.noLocationSpecified")}&lt;/span>
                        &lt;/div>
                      &lt;/div>
                    &lt;/div>
                  ))}
                &lt;/div>

                {/* Controles de paginación */}
                {eventosDelDia.length > eventsPerPage &amp;&amp; (
                  &lt;div className="flex justify-center items-center mt-4 space-x-2">
                    &lt;button
                      onClick={handlePrevEventPage}
                      disabled={currentEventPage === 1}
                      className={`p-1 rounded-md ${
                        currentEventPage === 1
                          ? "text-gray-600 cursor-not-allowed"
                          : "text-gray-400 hover:text-[#C0C0C0] hover:bg-gray-900/50"
                      }`}
                    >
                      &lt;ChevronLeft size={18} />
                    &lt;/button>

                    {/* Indicador de página */}
                    &lt;div className="flex space-x-1">
                      {Array.from({ length: totalEventPages }, (_, i) => (
                        &lt;button
                          key={i + 1}
                          onClick={() => setCurrentEventPage(i + 1)}
                          className={`w-6 h-6 flex items-center justify-center rounded-md text-xs ${
                            currentEventPage === i + 1
                              ? "bg-black border border-[#C0C0C0] text-[#C0C0C0]"
                              : "bg-gray-900/50 text-gray-400 hover:bg-gray-800"
                          }`}
                        >
                          {i + 1}
                        &lt;/button>
                      ))}
                    &lt;/div>

                    &lt;button
                      onClick={handleNextEventPage}
                      disabled={currentEventPage === totalEventPages}
                      className={`p-1 rounded-md ${
                        currentEventPage === totalEventPages
                          ? "text-gray-600 cursor-not-allowed"
                          : "text-gray-400 hover:text-[#C0C0C0] hover:bg-gray-900/50"
                      }`}
                    >
                      &lt;ChevronRight size={18} />
                    &lt;/button>
                  &lt;/div>
                )}
              &lt;/>
            ) : (
              &lt;div className="flex flex-col items-center justify-center h-40 text-gray-400">
                &lt;Music size={32} className="mb-2 text-gray-600" />
                &lt;p>{t("calendar.noEvents")}&lt;/p>
              &lt;/div>
            )
          ) : (
            &lt;div className="flex flex-col items-center justify-center h-40 text-gray-400">
              &lt;CalendarIcon size={32} className="mb-2 text-gray-600" />
              &lt;p>{t("calendar.selectDate")}&lt;/p>
            &lt;/div>
          )}
        &lt;/div>
      &lt;/div>

      {/* Modal de detalles del evento */}
      {showEventModal &amp;&amp; selectedEvent &amp;&amp; (
        &lt;div className="fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4">
          &lt;div className="bg-gray-900 border border-gray-700 rounded-lg w-full max-w-lg overflow-hidden">
            {/* Cabecera del modal */}
            &lt;div className="flex items-center justify-between p-4 border-b border-gray-700">
              &lt;h3 className="text-xl font-semibold text-[#C0C0C0]">{t("calendar.eventDetails")}&lt;/h3>
              &lt;button
                onClick={handleCloseEventModal}
                className="text-gray-400 hover:text-[#C0C0C0] rounded-full p-1 hover:bg-gray-800/50"
              >
                &lt;X size={20} />
              &lt;/button>
            &lt;/div>

            {/* Contenido del modal */}
            &lt;div className="p-5">
              &lt;div className="flex justify-between items-start mb-4">
                &lt;h2 className="text-2xl font-bold text-[#C0C0C0]">{selectedEvent.nombre}&lt;/h2>
                &lt;div
                  className={`px-3 py-1 rounded-full text-sm font-medium ${getTipoColor(selectedEvent.tipo).bg} ${
                    getTipoColor(selectedEvent.tipo).text
                  } ${getTipoColor(selectedEvent.tipo).border}`}
                >
                  {selectedEvent.tipo.charAt(0).toUpperCase() + selectedEvent.tipo.slice(1)}
                &lt;/div>
              &lt;/div>

              &lt;div className="space-y-4 mb-6">
                &lt;div className="flex items-center">
                  &lt;CalendarIcon size={18} className="text-gray-400 mr-3" />
                  &lt;span className="text-[#C0C0C0]">{formatDate(selectedEvent.fecha)}&lt;/span>
                &lt;/div>

                &lt;div className="flex items-center">
                  &lt;Clock size={18} className="text-gray-400 mr-3" />
                  &lt;span className="text-[#C0C0C0]">
                    {formatTime(selectedEvent.hora) || t("calendar.noTimeSpecified")}
                  &lt;/span>
                &lt;/div>

                &lt;div className="flex items-center">
                  &lt;MapPin size={18} className="text-gray-400 mr-3" />
                  &lt;span className="text-[#C0C0C0]">{selectedEvent.lugar || t("calendar.noLocationSpecified")}&lt;/span>
                &lt;/div>

                {selectedEvent.estado &amp;&amp; (
                  &lt;div className="flex items-center">
                    &lt;div className="w-4 h-4 rounded-full bg-gray-400 mr-3">&lt;/div>
                    &lt;span className="text-[#C0C0C0] capitalize">{selectedEvent.estado}&lt;/span>
                  &lt;/div>
                )}
              &lt;/div>

              {selectedEvent.descripcion &amp;&amp; (
                &lt;div className="mb-6">
                  &lt;h4 className="text-sm font-medium text-gray-400 mb-2">{t("calendar.description")}&lt;/h4>
                  &lt;p className="text-[#C0C0C0] bg-black/30 p-3 rounded-md">{selectedEvent.descripcion}&lt;/p>
                &lt;/div>
              )}

              {/* Botones de acción */}
              &lt;div className="mt-6">
                {isAdmin &amp;&amp; isEventInFuture(selectedEvent.fecha, selectedEvent.hora) &amp;&amp; (
                  &lt;>
                    {!showDeleteConfirm ? (
                      &lt;button
                        onClick={handleShowDeleteConfirm}
                        className="w-full py-2 !bg-red-800 hover:!bg-red-900 text-white rounded-md transition-colors"
                        style={{ backgroundColor: "#dc2626" }}
                      >
                        {t("calendar.cancelEvent")}
                      &lt;/button>
                    ) : (
                      &lt;div className="space-y-3">
                        &lt;p className="text-red-400 text-sm">{t("calendar.confirmDelete")}&lt;/p>
                        &lt;div className="flex space-x-3">
                          &lt;button
                            onClick={() => setShowDeleteConfirm(false)}
                            className="flex-1 py-2 bg-gray-800 hover:bg-gray-700 text-[#C0C0C0] rounded-md transition-colors"
                          >
                            {t("calendar.keep")}
                          &lt;/button>
                          &lt;button
                            onClick={handleDeleteEvent}
                            className="flex-1 py-2 !bg-red-800 hover:!bg-red-900 text-white rounded-md transition-colors"
                            style={{ backgroundColor: "#dc2626" }}
                          >
                            {t("calendar.delete")}
                          &lt;/button>
                        &lt;/div>
                      &lt;/div>
                    )}
                  &lt;/>
                )}

                {isAdmin &amp;&amp; !isEventInFuture(selectedEvent.fecha, selectedEvent.hora) &amp;&amp; (
                  &lt;div className="text-center py-3">
                    &lt;p className="text-red-500 text-sm">{t("calendar.pastEventCannotCancel")}&lt;/p>
                  &lt;/div>
                )}
              &lt;/div>
            &lt;/div>
          &lt;/div>
        &lt;/div>
      )}
    &lt;/div>
  )
}
</code></pre>
        </article>
    </section>




    
    
</div>


<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a> on Mon Jun 09 2025 13:51:24 GMT+0200 (hora de verano de Europa central) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
